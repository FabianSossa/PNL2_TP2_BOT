
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RAG Chatbot</title>
  <link rel="stylesheet" href="/static/style.css">
  <script>
    async function sendMessage() {
      const input = document.getElementById("user-input");
      const msg = input.value.trim();
      if (!msg) return;
      appendBubble(msg, "user");
      input.value = "";
      const res = await fetch("/api/chat", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({message: msg})
      });
      const data = await res.json();
      appendBubble(data.answer, "bot");
    }

    function appendBubble(text, who) {
      const chat = document.getElementById("chat");
      const bubble = document.createElement("div");
      bubble.className = who === "user" ? "bubble user" : "bubble bot";
      bubble.textContent = text;
      chat.appendChild(bubble);
      chat.scrollTop = chat.scrollHeight;
    }

    document.addEventListener("DOMContentLoaded", () => {
      const input = document.getElementById("user-input");
      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") sendMessage();
      });
      document.getElementById("send-btn").addEventListener("click", sendMessage);
    });
  </script>
</head>
<body>
  <header>
    <h1>RAG Chatbot</h1>
    <p>RAG con LangChain + {{ 'Pinecone' if false else 'Chroma' }}</p>
  </header>
  <main>
    <div id="chat" class="chat"></div>
    <div class="input-row">
      <input id="user-input" placeholder="Escribe tu pregunta..." autofocus>
      <button id="send-btn">Enviar</button>
    </div>
  </main>
  <footer>
    <small>Demo educativa. No almacena datos sensibles.</small>
  </footer>
</body>
</html>
